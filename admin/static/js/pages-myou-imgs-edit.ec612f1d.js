(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["pages-myou-imgs-edit"],{"01e8":function(a,e,t){"use strict";(function(a){t("7a82");var n=t("4ea4").default;Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var i=n(t("5530"));t("caad"),t("2532"),t("b64b"),t("d3b7");var r=t("d9de"),o=a.database();o.command;function u(a){var e={};for(var t in r.validator)a.includes(t)&&(e[t]=r.validator[t]);return e}var l={data:function(){var a={category_name:"",coll:null,image:"",mode:null,name:null,status:null,tags:null,time:null,user_id:null,view:null,zan:null};return{formData:a,formOptions:{},rules:(0,i.default)({},u(Object.keys(a)))}},onLoad:function(a){if(a.id){var e=a.id;this.formDataId=e,this.getDetail(e)}},onReady:function(){this.$refs.form.setRules(this.rules)},methods:{submit:function(){var a=this;uni.showLoading({mask:!0}),this.$refs.form.validate().then((function(e){return a.submitForm(e)})).catch((function(){})).finally((function(){uni.hideLoading()}))},submitForm:function(a){var e=this;return o.collection("myou-imgs").doc(this.formDataId).update(a).then((function(a){uni.showToast({title:"修改成功"}),e.getOpenerEventChannel().emit("refreshData"),setTimeout((function(){return uni.navigateBack()}),500)})).catch((function(a){uni.showModal({content:a.message||"请求服务失败",showCancel:!1})}))},getDetail:function(a){var e=this;uni.showLoading({mask:!0}),o.collection("myou-imgs").doc(a).field("category_name,coll,image,mode,name,status,tags,time,user_id,view,zan").get().then((function(a){var t=a.result.data[0];t&&(e.formData=t)})).catch((function(a){uni.showModal({content:a.message||"请求服务失败",showCancel:!1})})).finally((function(){uni.hideLoading()}))}}};e.default=l}).call(this,t("a9ff")["default"])},5904:function(a,e,t){"use strict";t.r(e);var n=t("f09c"),i=t("6c16");for(var r in i)["default"].indexOf(r)<0&&function(a){t.d(e,a,(function(){return i[a]}))}(r);var o=t("f0c5"),u=Object(o["a"])(i["default"],n["b"],n["c"],!1,null,null,null,!1,n["a"],void 0);e["default"]=u.exports},"6c16":function(a,e,t){"use strict";t.r(e);var n=t("01e8"),i=t.n(n);for(var r in n)["default"].indexOf(r)<0&&function(a){t.d(e,a,(function(){return n[a]}))}(r);e["default"]=i.a},d9de:function(a,e,t){"use strict";t("7a82");var n=t("4ea4").default;Object.defineProperty(e,"__esModule",{value:!0}),e.enumConverter=void 0,e.filterToWhere=function(a,e){var t={};for(var n in a){var o=a[n],u=o.type,l=o.value;switch(u){case"search":"string"===typeof l&&l.length&&(t[n]=new RegExp(l));break;case"select":if(l.length){var s,f=[],m=(0,r.default)(l);try{for(m.s();!(s=m.n()).done;){var c=s.value;f.push(e.eq(c))}}catch(_){m.e(_)}finally{m.f()}t[n]=e.or(f)}break;case"range":if(l.length){var d=l[0],v=l[1];t[n]=e.and([e.gte(d),e.lte(v)])}break;case"date":if(l.length){var g=(0,i.default)(l,2),b=g[0],h=g[1],D=new Date(b),p=new Date(h);t[n]=e.and([e.gte(D),e.lte(p)])}break;case"timestamp":if(l.length){var y=(0,i.default)(l,2),w=y[0],k=y[1];t[n]=e.and([e.gte(w),e.lte(k)])}break}}return t},e.validator=void 0;var i=n(t("3835")),r=n(t("b85c"));t("4d63"),t("c607"),t("ac1f"),t("2c3e"),t("25f0"),t("14d9");e.validator={category_name:{rules:[{format:"string"}],label:"分类"},coll:{rules:[]},image:{rules:[{format:"string"}]},mode:{rules:[]},name:{rules:[]},status:{rules:[]},tags:{rules:[]},time:{rules:[]},user_id:{rules:[]},view:{rules:[]},zan:{rules:[]}};e.enumConverter={}},f09c:function(a,e,t){"use strict";t.d(e,"b",(function(){return i})),t.d(e,"c",(function(){return r})),t.d(e,"a",(function(){return n}));var n={uniForms:t("f6fa").default,uniFormsItem:t("e1c2").default,uniDataPicker:t("1756").default,uniEasyinput:t("6e84").default},i=function(){var a=this,e=a.$createElement,t=a._self._c||e;return t("v-uni-view",{staticClass:"uni-container"},[t("uni-forms",{ref:"form",attrs:{model:a.formData,validateTrigger:"bind"}},[t("uni-forms-item",{attrs:{name:"category_name",label:"分类"}},[t("uni-data-picker",{attrs:{collection:"myou-img-category",field:" name as text,_id as value"},model:{value:a.formData.category_name,callback:function(e){a.$set(a.formData,"category_name",e)},expression:"formData.category_name"}})],1),t("uni-forms-item",{attrs:{name:"coll",label:""}},[t("undefined",{model:{value:a.formData.coll,callback:function(e){a.$set(a.formData,"coll",e)},expression:"formData.coll"}})],1),t("uni-forms-item",{attrs:{name:"image",label:""}},[t("uni-easyinput",{attrs:{placeholder:"图片"},model:{value:a.formData.image,callback:function(e){a.$set(a.formData,"image",e)},expression:"formData.image"}})],1),t("uni-forms-item",{attrs:{name:"mode",label:""}},[t("undefined",{model:{value:a.formData.mode,callback:function(e){a.$set(a.formData,"mode",e)},expression:"formData.mode"}})],1),t("uni-forms-item",{attrs:{name:"name",label:""}},[t("undefined",{model:{value:a.formData.name,callback:function(e){a.$set(a.formData,"name",e)},expression:"formData.name"}})],1),t("uni-forms-item",{attrs:{name:"status",label:""}},[t("undefined",{model:{value:a.formData.status,callback:function(e){a.$set(a.formData,"status",e)},expression:"formData.status"}})],1),t("uni-forms-item",{attrs:{name:"tags",label:""}},[t("undefined",{model:{value:a.formData.tags,callback:function(e){a.$set(a.formData,"tags",e)},expression:"formData.tags"}})],1),t("uni-forms-item",{attrs:{name:"time",label:""}},[t("undefined",{model:{value:a.formData.time,callback:function(e){a.$set(a.formData,"time",e)},expression:"formData.time"}})],1),t("uni-forms-item",{attrs:{name:"user_id",label:""}},[t("undefined",{model:{value:a.formData.user_id,callback:function(e){a.$set(a.formData,"user_id",e)},expression:"formData.user_id"}})],1),t("uni-forms-item",{attrs:{name:"view",label:""}},[t("undefined",{model:{value:a.formData.view,callback:function(e){a.$set(a.formData,"view",e)},expression:"formData.view"}})],1),t("uni-forms-item",{attrs:{name:"zan",label:""}},[t("undefined",{model:{value:a.formData.zan,callback:function(e){a.$set(a.formData,"zan",e)},expression:"formData.zan"}})],1),t("v-uni-view",{staticClass:"uni-button-group"},[t("v-uni-button",{staticClass:"uni-button",staticStyle:{width:"100px"},attrs:{type:"primary"},on:{click:function(e){arguments[0]=e=a.$handleEvent(e),a.submit.apply(void 0,arguments)}}},[a._v("提交")]),t("v-uni-navigator",{staticStyle:{"margin-left":"15px"},attrs:{"open-type":"navigateBack"}},[t("v-uni-button",{staticClass:"uni-button",staticStyle:{width:"100px"}},[a._v("返回")])],1)],1)],1)],1)},r=[]}}]);