(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["pages-myou-imgs-add"],{"0de4":function(t,e,a){"use strict";(function(t){a("7a82");var n=a("4ea4").default;Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var i=n(a("5530"));a("caad"),a("2532"),a("b64b"),a("ac1f"),a("5319"),a("d3b7"),a("159b"),a("14d9");var r=a("d9de"),s=t.database();s.command;function u(t){var e={};for(var a in r.validator)t.includes(a)&&(e[a]=r.validator[a]);return e}var o={data:function(){var t={category_name:"",coll:null,image:"",mode:null,name:null,status:null,tags:null,time:null,user_id:null,view:null,zan:null};return{formData:t,imgsText:"",imgs:[],formOptions:{},rules:(0,i.default)({},u(Object.keys(t)))}},onReady:function(){this.$refs.form.setRules(this.rules)},methods:{getImgs:function(){var t=this;if(this.formData.category_name){var e=[],a=[];this.imgsText=this.imgsText.replace(/\r|\n/gi,""),e=this.imgsText.split(","),e.forEach((function(e){var n={category_name:t.formData.category_name,image:e};a.push(n)})),this.imgs=a}else uni.showToast({title:"请先选择分分类",icon:"error"})},submit:function(){var t=this;uni.showLoading({mask:!0}),this.$refs.form.validate().then((function(e){return t.submitForm(e)})).catch((function(){})).finally((function(){uni.hideLoading()}))},submitForm:function(t){var e=this;return this.imgs.length>0&&(t=this.imgs),s.collection("myou-imgs").add(t).then((function(t){uni.showToast({title:"新增成功"}),e.getOpenerEventChannel().emit("refreshData"),setTimeout((function(){return uni.navigateBack()}),500)})).catch((function(t){uni.showModal({content:t.message||"请求服务失败",showCancel:!1})}))}}};e.default=o}).call(this,a("a9ff")["default"])},"857b":function(t,e,a){"use strict";a.r(e);var n=a("ebd6"),i=a("ae31");for(var r in i)["default"].indexOf(r)<0&&function(t){a.d(e,t,(function(){return i[t]}))}(r);var s=a("f0c5"),u=Object(s["a"])(i["default"],n["b"],n["c"],!1,null,null,null,!1,n["a"],void 0);e["default"]=u.exports},ae31:function(t,e,a){"use strict";a.r(e);var n=a("0de4"),i=a.n(n);for(var r in n)["default"].indexOf(r)<0&&function(t){a.d(e,t,(function(){return n[t]}))}(r);e["default"]=i.a},d9de:function(t,e,a){"use strict";a("7a82");var n=a("4ea4").default;Object.defineProperty(e,"__esModule",{value:!0}),e.enumConverter=void 0,e.filterToWhere=function(t,e){var a={};for(var n in t){var s=t[n],u=s.type,o=s.value;switch(u){case"search":"string"===typeof o&&o.length&&(a[n]=new RegExp(o));break;case"select":if(o.length){var l,m=[],c=(0,r.default)(o);try{for(c.s();!(l=c.n()).done;){var f=l.value;m.push(e.eq(f))}}catch(_){c.e(_)}finally{c.f()}a[n]=e.or(m)}break;case"range":if(o.length){var d=o[0],v=o[1];a[n]=e.and([e.gte(d),e.lte(v)])}break;case"date":if(o.length){var g=(0,i.default)(o,2),b=g[0],h=g[1],p=new Date(b),y=new Date(h);a[n]=e.and([e.gte(p),e.lte(y)])}break;case"timestamp":if(o.length){var D=(0,i.default)(o,2),w=D[0],x=D[1];a[n]=e.and([e.gte(w),e.lte(x)])}break}}return a},e.validator=void 0;var i=n(a("3835")),r=n(a("b85c"));a("4d63"),a("c607"),a("ac1f"),a("2c3e"),a("25f0"),a("14d9");e.validator={category_name:{rules:[{format:"string"}],label:"分类"},coll:{rules:[]},image:{rules:[{format:"string"}]},mode:{rules:[]},name:{rules:[]},status:{rules:[]},tags:{rules:[]},time:{rules:[]},user_id:{rules:[]},view:{rules:[]},zan:{rules:[]}};e.enumConverter={}},ebd6:function(t,e,a){"use strict";a.d(e,"b",(function(){return i})),a.d(e,"c",(function(){return r})),a.d(e,"a",(function(){return n}));var n={uniForms:a("f6fa").default,uniFormsItem:a("e1c2").default,uniDataPicker:a("1756").default,uniEasyinput:a("6e84").default},i=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("v-uni-view",[a("uni-row",[a("uni-col",{attrs:{span:"16"}},[a("v-uni-view",{staticClass:"uni-container"},[a("uni-forms",{ref:"form",attrs:{model:t.formData,validateTrigger:"bind"}},[a("uni-forms-item",{attrs:{name:"category_name",label:"分类"}},[a("uni-data-picker",{attrs:{collection:"myou-img-category",field:" name as text,_id as value"},model:{value:t.formData.category_name,callback:function(e){t.$set(t.formData,"category_name",e)},expression:"formData.category_name"}})],1),a("uni-forms-item",{attrs:{name:"coll",label:""}},[a("undefined",{model:{value:t.formData.coll,callback:function(e){t.$set(t.formData,"coll",e)},expression:"formData.coll"}})],1),a("uni-forms-item",{attrs:{name:"image",label:"图片直连"}},[a("uni-easyinput",{attrs:{placeholder:"图片"},model:{value:t.formData.image,callback:function(e){t.$set(t.formData,"image",e)},expression:"formData.image"}})],1),a("uni-forms-item",{attrs:{name:"mode",label:"批量链接"}},[a("uni-easyinput",{attrs:{type:"textarea",maxlength:-1,autoHeight:!0,placeholder:"请输入批量链接,逗号隔开"},model:{value:t.imgsText,callback:function(e){t.imgsText=e},expression:"imgsText"}})],1),a("uni-forms-item",{attrs:{label:"解析图片"}},[a("v-uni-view",{staticClass:"uni-button-group"},[a("v-uni-button",{staticClass:"uni-button",staticStyle:{width:"100px"},attrs:{type:"primary"},on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.getImgs.apply(void 0,arguments)}}},[t._v("解析")])],1)],1),a("uni-forms-item",{attrs:{name:"status",label:""}},[a("undefined",{model:{value:t.formData.status,callback:function(e){t.$set(t.formData,"status",e)},expression:"formData.status"}})],1),a("uni-forms-item",{attrs:{name:"tags",label:""}},[a("undefined",{model:{value:t.formData.tags,callback:function(e){t.$set(t.formData,"tags",e)},expression:"formData.tags"}})],1),a("uni-forms-item",{attrs:{name:"time",label:""}},[a("undefined",{model:{value:t.formData.time,callback:function(e){t.$set(t.formData,"time",e)},expression:"formData.time"}})],1),a("uni-forms-item",{attrs:{name:"user_id",label:""}},[a("undefined",{model:{value:t.formData.user_id,callback:function(e){t.$set(t.formData,"user_id",e)},expression:"formData.user_id"}})],1),a("uni-forms-item",{attrs:{name:"view",label:""}},[a("undefined",{model:{value:t.formData.view,callback:function(e){t.$set(t.formData,"view",e)},expression:"formData.view"}})],1),a("uni-forms-item",{attrs:{name:"zan",label:""}},[a("undefined",{model:{value:t.formData.zan,callback:function(e){t.$set(t.formData,"zan",e)},expression:"formData.zan"}})],1),a("v-uni-view",{staticClass:"uni-button-group"},[a("v-uni-button",{staticClass:"uni-button",staticStyle:{width:"100px"},attrs:{type:"primary"},on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.submit.apply(void 0,arguments)}}},[t._v("提交")]),a("v-uni-navigator",{staticStyle:{"margin-left":"15px"},attrs:{"open-type":"navigateBack"}},[a("v-uni-button",{staticClass:"uni-button",staticStyle:{width:"100px"}},[t._v("返回")])],1)],1)],1)],1)],1),a("uni-col",{attrs:{span:"8\t"}},[a("uni-grid",{attrs:{column:3}},t._l(t.imgs,(function(t){return a("uni-grid-item",[a("v-uni-view",{},[a("img",{staticStyle:{width:"100%",height:"100%"},attrs:{src:t.image,alt:""}})])],1)})),1)],1)],1)],1)},r=[]}}]);