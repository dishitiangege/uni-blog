(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["pages-ucenter-userinfo-userinfo"],{"073f":function(e,t,n){"use strict";var i=n("56c1"),o=n.n(i);o.a},2264:function(e,t,n){"use strict";(function(e){n("7a82");var i=n("4ea4").default;Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,n("d3b7"),n("e9c4");var o=i(n("c7eb")),a=i(n("1da1")),u=i(n("5530")),c=n("26cb"),r=e.database(),s=r.collection("uni-id-users"),l={data:function(){return{univerifyStyle:{authButton:{title:"本机号码一键绑定"},otherLoginButton:{title:"其他号码绑定"}}}},onLoad:function(){this.univerifyStyle.authButton.title=this.$t("userinfo.bindPhoneNumber"),this.univerifyStyle.otherLoginButton.title=this.$t("userinfo.bindOtherLogin"),uni.setNavigationBarTitle({title:this.$t("userinfo.navigationBarTitle")})},computed:(0,u.default)((0,u.default)({},(0,c.mapGetters)({userInfo:"user/info",login:"user/hasLogin"})),{},{avatar_file:function(){if(this.userInfo.avatar_file&&this.userInfo.avatar_file.url)return this.userInfo.avatar_file}}),methods:(0,u.default)((0,u.default)({},(0,c.mapMutations)({setUserInfo:"user/login"})),{},{bindMobile:function(){this.bindMobileBySmsCode()},univerify:function(){var t=this;uni.login({provider:"univerify",univerifyStyle:this.univerifyStyle,success:function(){var n=(0,a.default)((0,o.default)().mark((function n(i){return(0,o.default)().wrap((function(n){while(1)switch(n.prev=n.next){case 0:console.log(i.authResult),e.callFunction({name:"uni-id-cf",data:{action:"bindMobileByUniverify",params:i.authResult},success:function(e){var n=e.result;console.log(n),0===n.code?(t.setUserInfo({mobile:n.mobile}),uni.closeAuthView()):uni.showModal({content:n.msg,showCancel:!1,complete:function(){uni.closeAuthView()}})}});case 2:case"end":return n.stop()}}),n)})));return function(e){return n.apply(this,arguments)}}(),fail:function(e){console.log(e),"30002"!=e.code&&"30001"!=e.code||t.bindMobileBySmsCode()}})},bindMobileBySmsCode:function(){uni.navigateTo({url:"/pages/ucenter/userinfo/bind-mobile/bind-mobile"})},setNickname:function(e){var t=this;console.log(e),e?(s.where("_id==$env.uid").update({nickname:e}).then((function(n){console.log(n),n.result.updated?(uni.showToast({title:t.$t("common.updateSucceeded"),icon:"none"}),t.setUserInfo({nickname:e})):uni.showToast({title:t.$t("userinfo.noChange"),icon:"none"})})),this.$refs.dialog.close()):this.$refs.dialog.open()},setAvatarFile:function(e){var t=this;uni.showLoading({title:this.$t("userinfo.setting"),mask:!0}),s.where("_id==$env.uid").update({avatar_file:e}).then((function(n){console.log(n),e?uni.showToast({icon:"none",title:t.$t("userinfo.setSucceeded")}):uni.showToast({icon:"none",title:t.$t("userinfo.deleteSucceeded")}),t.setUserInfo({avatar_file:e})})).catch((function(e){uni.showModal({content:e.message||t.$t("userinfo.requestFail"),showCancel:!1})})).finally((function(){uni.hideLoading()}))},uploadAvatarImg:function(t){var n=this,i={quality:100,width:600,height:600,resize:!0};uni.chooseImage({count:1,crop:i,success:function(){var t=(0,a.default)((0,o.default)().mark((function t(a){var u,c,r,s,l,d;return(0,o.default)().wrap((function(t){while(1)switch(t.prev=t.next){case 0:return console.log(a),u=a.tempFiles[0],c={extname:u.name.split(".")[u.name.split(".").length-1]},r=a.tempFilePaths[0],t.next=4,new Promise((function(e){uni.navigateTo({url:"/pages/ucenter/userinfo/cropImage?path="+r+"&options=".concat(JSON.stringify(i)),animationType:"fade-in",events:{success:function(t){e(t)}}})}));case 4:return r=t.sent,console.log(n.userInfo),s=n.userInfo._id+""+Date.now(),c.name=s,uni.showLoading({title:n.$t("userinfo.uploading"),mask:!0}),t.next=11,e.uploadFile({filePath:r,cloudPath:s,fileType:"image"});case 11:l=t.sent,d=l.fileID,c.url=d,console.log({avatar_file:c}),uni.hideLoading(),n.setAvatarFile(c);case 17:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()})}})};t.default=l}).call(this,n("a9ff")["default"])},2777:function(e,t,n){var i=n("954c");i.__esModule&&(i=i.default),"string"===typeof i&&(i=[[e.i,i,""]]),i.locals&&(e.exports=i.locals);var o=n("4f06").default;o("7b8378bc",i,!0,{sourceMap:!1,shadowMode:!1})},3685:function(e,t,n){"use strict";n.r(t);var i=n("2264"),o=n.n(i);for(var a in i)["default"].indexOf(a)<0&&function(e){n.d(t,e,(function(){return i[e]}))}(a);t["default"]=o.a},"3afc":function(e,t,n){var i=n("da2e");i.__esModule&&(i=i.default),"string"===typeof i&&(i=[[e.i,i,""]]),i.locals&&(e.exports=i.locals);var o=n("4f06").default;o("5f10ab18",i,!0,{sourceMap:!1,shadowMode:!1})},"3bf2":function(e,t,n){"use strict";(function(e){n("7a82");var i=n("4ea4").default;Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var o=i(n("c7eb")),a=i(n("1da1")),u={name:"cloud-image",emits:["click","switchChange"],props:{mode:{type:String,default:function(){return"widthFix"}},src:{default:function(){return""}},width:{type:String,default:function(){return"100rpx"}},height:{type:String,default:function(){return"100rpx"}}},watch:{src:{handler:function(t){var n=this;t&&"cloud://"==t.substring(0,8)?e.getTempFileURL({fileList:[t]}).then((function(e){n.cSrc=e.fileList[0].tempFileURL})):this.cSrc=t},immediate:!0}},mounted:function(){return(0,a.default)((0,o.default)().mark((function e(){return(0,o.default)().wrap((function(e){while(1)switch(e.prev=e.next){case 0:case"end":return e.stop()}}),e)})))()},methods:{onClick:function(){this.$emit("click")}},data:function(){return{cSrc:!1}}};t.default=u}).call(this,n("a9ff")["default"])},"411d":function(e){e.exports=JSON.parse('{"uni-popup.cancel":"取消","uni-popup.ok":"確定","uni-popup.placeholder":"請輸入","uni-popup.title":"提示","uni-popup.shareTitle":"分享到"}')},4422:function(e,t,n){"use strict";n("7a82"),Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i={data:function(){return{}},created:function(){this.popup=this.getParent()},methods:{getParent:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"uniPopup",t=this.$parent,n=t.$options.name;while(n!==e){if(t=t.$parent,!t)return!1;n=t.$options.name}return t}}};t.default=i},"4c36":function(e,t,n){"use strict";n.r(t);var i=n("a8e9"),o=n("5c83");for(var a in o)["default"].indexOf(a)<0&&function(e){n.d(t,e,(function(){return o[e]}))}(a);var u=n("f0c5"),c=Object(u["a"])(o["default"],i["b"],i["c"],!1,null,null,null,!1,i["a"],void 0);t["default"]=c.exports},"56c1":function(e,t,n){var i=n("c14f");i.__esModule&&(i=i.default),"string"===typeof i&&(i=[[e.i,i,""]]),i.locals&&(e.exports=i.locals);var o=n("4f06").default;o("24b9c661",i,!0,{sourceMap:!1,shadowMode:!1})},"5c83":function(e,t,n){"use strict";n.r(t);var i=n("3bf2"),o=n.n(i);for(var a in i)["default"].indexOf(a)<0&&function(e){n.d(t,e,(function(){return i[e]}))}(a);t["default"]=o.a},"5d77":function(e,t,n){"use strict";n("7a82");var i=n("4ea4").default;Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var o=i(n("d568")),a=i(n("6d97")),u=i(n("411d")),c={en:o.default,"zh-Hans":a.default,"zh-Hant":u.default};t.default=c},"64a0":function(e,t,n){"use strict";n("7a82");var i=n("4ea4").default;Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,n("a9e3");var o=i(n("4422")),a=n("37dc"),u=i(n("5d77")),c=(0,a.initVueI18n)(u.default),r=c.t,s={name:"uniPopupDialog",mixins:[o.default],emits:["confirm","close"],props:{value:{type:[String,Number],default:""},placeholder:{type:[String,Number],default:""},type:{type:String,default:"error"},mode:{type:String,default:"base"},title:{type:String,default:""},content:{type:String,default:""},beforeClose:{type:Boolean,default:!1},cancelText:{type:String,default:""},confirmText:{type:String,default:""}},data:function(){return{dialogType:"error",focus:!1,val:""}},computed:{okText:function(){return this.confirmText||r("uni-popup.ok")},closeText:function(){return this.cancelText||r("uni-popup.cancel")},placeholderText:function(){return this.placeholder||r("uni-popup.placeholder")},titleText:function(){return this.title||r("uni-popup.title")}},watch:{type:function(e){this.dialogType=e},mode:function(e){"input"===e&&(this.dialogType="info")},value:function(e){this.val=e}},created:function(){this.popup.disableMask(),"input"===this.mode?(this.dialogType="info",this.val=this.value):this.dialogType=this.type},mounted:function(){this.focus=!0},methods:{onOk:function(){"input"===this.mode?this.$emit("confirm",this.val):this.$emit("confirm"),this.beforeClose||this.popup.close()},closeDialog:function(){this.$emit("close"),this.beforeClose||this.popup.close()},close:function(){this.popup.close()}}};t.default=s},"66e3":function(e,t,n){"use strict";n.r(t);var i=n("d17b"),o=n("e92d");for(var a in o)["default"].indexOf(a)<0&&function(e){n.d(t,e,(function(){return o[e]}))}(a);n("87bd");var u=n("f0c5"),c=Object(u["a"])(o["default"],i["b"],i["c"],!1,null,"e2196c62",null,!1,i["a"],void 0);t["default"]=c.exports},"6d97":function(e){e.exports=JSON.parse('{"uni-popup.cancel":"取消","uni-popup.ok":"确定","uni-popup.placeholder":"请输入","uni-popup.title":"提示","uni-popup.shareTitle":"分享到"}')},"87b9":function(e,t,n){"use strict";n.d(t,"b",(function(){return o})),n.d(t,"c",(function(){return a})),n.d(t,"a",(function(){return i}));var i={uniList:n("e5cc").default,uniListItem:n("2b10").default,cloudImage:n("4c36").default,uniIcons:n("76a7").default,uniPopup:n("59e7").default,uniPopupDialog:n("ee7c").default,uniBindMobileByMpWeixin:n("66e3").default},o=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("v-uni-view",[n("uni-list",[n("uni-list-item",{staticClass:"item",scopedSlots:e._u([{key:"body",fn:function(){return[n("v-uni-view",{staticClass:"item"},[n("v-uni-text",[e._v(e._s(e.$t("userinfo.ProfilePhoto")))]),e.avatar_file?n("cloud-image",{attrs:{src:e.avatar_file.url,width:"50px",height:"50px"},on:{click:function(t){arguments[0]=t=e.$handleEvent(t),e.uploadAvatarImg.apply(void 0,arguments)}}}):n("uni-icons",{staticClass:"chooseAvatar",attrs:{type:"plusempty",size:"30",color:"#dddddd"},on:{click:function(t){arguments[0]=t=e.$handleEvent(t),e.uploadAvatarImg.apply(void 0,arguments)}}})],1)]},proxy:!0}])}),n("uni-list-item",{staticClass:"item",attrs:{title:e.$t("userinfo.nickname"),rightText:e.userInfo.nickname||e.$t("userinfo.notSet"),link:!0},on:{click:function(t){arguments[0]=t=e.$handleEvent(t),e.setNickname("")}}})],1),n("uni-popup",{ref:"dialog",attrs:{type:"dialog"}},[n("uni-popup-dialog",{attrs:{mode:"input",value:e.userInfo.nickname,title:e.$t("userinfo.setNickname"),placeholder:e.$t("userinfo.setNicknamePlaceholder")},on:{confirm:function(t){arguments[0]=t=e.$handleEvent(t),e.setNickname.apply(void 0,arguments)}}})],1),n("uni-bindMobileByMpWeixin",{ref:"uni-bindMobileByMpWeixin"})],1)},a=[]},"87bd":function(e,t,n){"use strict";var i=n("3afc"),o=n.n(i);o.a},9205:function(e,t,n){"use strict";n.d(t,"b",(function(){return i})),n.d(t,"c",(function(){return o})),n.d(t,"a",(function(){}));var i=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("v-uni-view",{staticClass:"uni-popup-dialog"},[n("v-uni-view",{staticClass:"uni-dialog-title"},[n("v-uni-text",{staticClass:"uni-dialog-title-text",class:["uni-popup__"+e.dialogType]},[e._v(e._s(e.titleText))])],1),"base"===e.mode?n("v-uni-view",{staticClass:"uni-dialog-content"},[e._t("default",[n("v-uni-text",{staticClass:"uni-dialog-content-text"},[e._v(e._s(e.content))])])],2):n("v-uni-view",{staticClass:"uni-dialog-content"},[e._t("default",[n("v-uni-input",{staticClass:"uni-dialog-input",attrs:{type:"text",placeholder:e.placeholderText,focus:e.focus},model:{value:e.val,callback:function(t){e.val=t},expression:"val"}})])],2),n("v-uni-view",{staticClass:"uni-dialog-button-group"},[n("v-uni-view",{staticClass:"uni-dialog-button",on:{click:function(t){arguments[0]=t=e.$handleEvent(t),e.closeDialog.apply(void 0,arguments)}}},[n("v-uni-text",{staticClass:"uni-dialog-button-text"},[e._v(e._s(e.closeText))])],1),n("v-uni-view",{staticClass:"uni-dialog-button uni-border-left",on:{click:function(t){arguments[0]=t=e.$handleEvent(t),e.onOk.apply(void 0,arguments)}}},[n("v-uni-text",{staticClass:"uni-dialog-button-text uni-button-color"},[e._v(e._s(e.okText))])],1)],1)],1)},o=[]},"954c":function(e,t,n){var i=n("24fb");t=i(!1),t.push([e.i,'@charset "UTF-8";\n/**\n * 这里是uni-app内置的常用样式变量\n *\n * uni-app 官方扩展插件及插件市场（https://ext.dcloud.net.cn）上很多三方插件均使用了这些样式变量\n * 如果你是插件开发者，建议你使用scss预处理，并在插件代码中直接使用这些变量（无需 import 这个文件），方便用户通过搭积木的方式开发整体风格一致的App\n *\n */\n/**\n * 如果你是App开发者（插件使用者），你可以通过修改这些变量来定制自己的插件主题，实现自定义主题功能\n *\n * 如果你的项目同样使用了scss预处理，你也可以直接在你的 scss 代码中使用如下变量，同时无需 import 这个文件\n */\n/* 颜色变量 */\n/* uni.scss */\n/* 行为相关颜色 */\n/* 文字基本颜色 */\n/* 背景颜色 */\n/* 边框颜色 */\n/* 尺寸变量 */\n/* 文字尺寸 */\n/* 图片尺寸 */\n/* Border Radius */\n/* 水平间距 */\n/* 垂直间距 */\n/* 透明度 */\n/* 文章场景相关 */.uni-popup-dialog[data-v-99b3946c]{width:300px;border-radius:11px;background-color:#fff}.uni-dialog-title[data-v-99b3946c]{display:flex;flex-direction:row;justify-content:center;padding-top:25px}.uni-dialog-title-text[data-v-99b3946c]{font-size:16px;font-weight:500}.uni-dialog-content[data-v-99b3946c]{display:flex;flex-direction:row;justify-content:center;align-items:center;padding:20px}.uni-dialog-content-text[data-v-99b3946c]{font-size:14px;color:#6c6c6c}.uni-dialog-button-group[data-v-99b3946c]{display:flex;flex-direction:row;border-top-color:#f5f5f5;border-top-style:solid;border-top-width:1px}.uni-dialog-button[data-v-99b3946c]{display:flex;flex:1;flex-direction:row;justify-content:center;align-items:center;height:45px}.uni-border-left[data-v-99b3946c]{border-left-color:#f0f0f0;border-left-style:solid;border-left-width:1px}.uni-dialog-button-text[data-v-99b3946c]{font-size:16px;color:#333}.uni-button-color[data-v-99b3946c]{color:#007aff}.uni-dialog-input[data-v-99b3946c]{flex:1;font-size:14px;border:1px #eee solid;height:40px;padding:0 10px;border-radius:5px;color:#555}.uni-popup__success[data-v-99b3946c]{color:#4cd964}.uni-popup__warn[data-v-99b3946c]{color:#f0ad4e}.uni-popup__error[data-v-99b3946c]{color:#dd524d}.uni-popup__info[data-v-99b3946c]{color:#909399}',""]),e.exports=t},a8e9:function(e,t,n){"use strict";n.d(t,"b",(function(){return i})),n.d(t,"c",(function(){return o})),n.d(t,"a",(function(){}));var i=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("v-uni-view",{style:{width:e.width,height:e.height},on:{click:function(t){arguments[0]=t=e.$handleEvent(t),e.onClick.apply(void 0,arguments)}}},[e.cSrc?n("v-uni-image",{staticStyle:{"border-radius":"50%"},style:{width:e.width,height:e.height},attrs:{src:e.cSrc,mode:e.mode}}):e._e()],1)},o=[]},aa0e:function(e,t,n){"use strict";var i=n("2777"),o=n.n(i);o.a},b504:function(e,t,n){"use strict";n.r(t);var i=n("64a0"),o=n.n(i);for(var a in i)["default"].indexOf(a)<0&&function(e){n.d(t,e,(function(){return i[e]}))}(a);t["default"]=o.a},c14f:function(e,t,n){var i=n("24fb");t=i(!1),t.push([e.i,'@charset "UTF-8";\n/**\n * 这里是uni-app内置的常用样式变量\n *\n * uni-app 官方扩展插件及插件市场（https://ext.dcloud.net.cn）上很多三方插件均使用了这些样式变量\n * 如果你是插件开发者，建议你使用scss预处理，并在插件代码中直接使用这些变量（无需 import 这个文件），方便用户通过搭积木的方式开发整体风格一致的App\n *\n */\n/**\n * 如果你是App开发者（插件使用者），你可以通过修改这些变量来定制自己的插件主题，实现自定义主题功能\n *\n * 如果你的项目同样使用了scss预处理，你也可以直接在你的 scss 代码中使用如下变量，同时无需 import 这个文件\n */\n/* 颜色变量 */\n/* uni.scss */\n/* 行为相关颜色 */\n/* 文字基本颜色 */\n/* 背景颜色 */\n/* 边框颜色 */\n/* 尺寸变量 */\n/* 文字尺寸 */\n/* 图片尺寸 */\n/* Border Radius */\n/* 水平间距 */\n/* 垂直间距 */\n/* 透明度 */\n/* 文章场景相关 */uni-view[data-v-4dceb1fe]{display:flex;box-sizing:border-box;flex-direction:column}.item[data-v-4dceb1fe]{width:%?750?%;flex-direction:row;justify-content:space-between;align-items:center}.chooseAvatar[data-v-4dceb1fe]{border:dotted 1px #ddd;border-radius:10px;text-align:center;width:50px;height:50px;line-height:50px}',""]),e.exports=t},d17b:function(e,t,n){"use strict";n.d(t,"b",(function(){return o})),n.d(t,"c",(function(){return a})),n.d(t,"a",(function(){return i}));var i={uniPopup:n("59e7").default},o=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("uni-popup",{ref:"popup",attrs:{type:"bottom"}},[n("v-uni-view",{staticClass:"box"},[n("v-uni-text",{staticClass:"headBox"},[e._v("绑定资料")]),n("v-uni-text",{staticClass:"tip"},[e._v("将一键获取你的手机号码绑定你的个人资料")]),n("v-uni-view",{staticClass:"btnBox"},[n("v-uni-text",{staticClass:"close",on:{click:function(t){arguments[0]=t=e.$handleEvent(t),e.closeMe.apply(void 0,arguments)}}},[e._v("关闭")]),n("v-uni-button",{staticClass:"agree",attrs:{type:"warn","open-type":"getPhoneNumber"},on:{click:function(t){arguments[0]=t=e.$handleEvent(t),e.beforeGetphonenumber.apply(void 0,arguments)},getphonenumber:function(t){arguments[0]=t=e.$handleEvent(t),e.bindMobileByMpWeixin.apply(void 0,arguments)}}},[e._v("获取")])],1)],1)],1)},a=[]},d568:function(e){e.exports=JSON.parse('{"uni-popup.cancel":"cancel","uni-popup.ok":"ok","uni-popup.placeholder":"pleace enter","uni-popup.title":"Hint","uni-popup.shareTitle":"Share to"}')},da2e:function(e,t,n){var i=n("24fb");t=i(!1),t.push([e.i,'@charset "UTF-8";\n/**\n * 这里是uni-app内置的常用样式变量\n *\n * uni-app 官方扩展插件及插件市场（https://ext.dcloud.net.cn）上很多三方插件均使用了这些样式变量\n * 如果你是插件开发者，建议你使用scss预处理，并在插件代码中直接使用这些变量（无需 import 这个文件），方便用户通过搭积木的方式开发整体风格一致的App\n *\n */\n/**\n * 如果你是App开发者（插件使用者），你可以通过修改这些变量来定制自己的插件主题，实现自定义主题功能\n *\n * 如果你的项目同样使用了scss预处理，你也可以直接在你的 scss 代码中使用如下变量，同时无需 import 这个文件\n */\n/* 颜色变量 */\n/* uni.scss */\n/* 行为相关颜色 */\n/* 文字基本颜色 */\n/* 背景颜色 */\n/* 边框颜色 */\n/* 尺寸变量 */\n/* 文字尺寸 */\n/* 图片尺寸 */\n/* Border Radius */\n/* 水平间距 */\n/* 垂直间距 */\n/* 透明度 */\n/* 文章场景相关 */uni-view[data-v-e2196c62]{display:flex}.box[data-v-e2196c62]{background-color:#fff;height:200px;width:%?750?%;flex-direction:column;border-top-left-radius:15px;border-top-right-radius:15px}.headBox[data-v-e2196c62]{padding:%?20?%;height:%?80?%;line-height:%?80?%;text-align:left;font-size:%?32?%;color:#333;margin-left:%?15?%}.tip[data-v-e2196c62]{color:#666;text-align:left;justify-content:center;margin:%?10?% %?30?%;font-size:%?36?%}.btnBox[data-v-e2196c62]{margin-top:%?45?%;justify-content:center;flex-direction:row}.close[data-v-e2196c62],\n.agree[data-v-e2196c62]{text-align:center;width:%?200?%;height:%?80?%;line-height:%?80?%;border-radius:50px;margin:0 %?20?%;font-size:%?36?%}.close[data-v-e2196c62]{color:#999;border-color:#eee;border-style:solid;border-width:1px;background-color:#fff}.close[data-v-e2196c62]:active{color:#989898;background-color:#e2e2e2}.agree[data-v-e2196c62]{background-color:#dd524d;color:#fff}.agree[data-v-e2196c62]:active{background-color:#f5f5f6}',""]),e.exports=t},dd34:function(e,t,n){"use strict";n.r(t);var i=n("87b9"),o=n("3685");for(var a in o)["default"].indexOf(a)<0&&function(e){n.d(t,e,(function(){return o[e]}))}(a);n("073f");var u=n("f0c5"),c=Object(u["a"])(o["default"],i["b"],i["c"],!1,null,"4dceb1fe",null,!1,i["a"],void 0);t["default"]=c.exports},df1e:function(e,t,n){"use strict";(function(e){n("7a82");var i=n("4ea4").default;Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var o=i(n("c7eb")),a=i(n("1da1")),u=i(n("5530")),c=n("26cb"),r=e.database(),s=(r.collection("uni-id-users"),{emits:["next"],computed:(0,u.default)({},(0,c.mapGetters)({userInfo:"user/info",login:"user/hasLogin"})),data:function(){return{}},methods:(0,u.default)((0,u.default)({},(0,c.mapMutations)({setUserInfo:"user/login"})),{},{beforeGetphonenumber:function(){uni.showLoading({mask:!0}),wx.checkSession({success:function(){console.log("session_key 未过期"),uni.hideLoading()},fail:function(){console.log("session_key 已经失效，正在执行更新"),wx.login({success:function(t){var n=t.code;e.callFunction({name:"uni-id-cf",data:{action:"refreshSessionKey",params:{code:n}},complete:function(e){console.log(e),uni.hideLoading()}})},fail:function(e){console.error(e)}})}})},bindMobileByMpWeixin:function(t){var n=this;console.log(t.detail),"getPhoneNumber:ok"==t.errMsg?e.callFunction({name:"uni-id-cf",data:{action:"bindMobileByMpWeixin",params:t.detail},complete:function(e){console.log(e)},success:function(e){uni.showToast({title:e.result.msg||"绑定成功",icon:"none"}),0===e.result.code&&n.setUserInfo({mobile:e.result.mobile}),n.closeMe()}}):this.closeMe()},open:function(e){var t=this;return(0,a.default)((0,o.default)().mark((function n(){return(0,o.default)().wrap((function(n){while(1)switch(n.prev=n.next){case 0:e,t.$refs.popup.open(),t.beforeGetphonenumber();case 3:case"end":return n.stop()}}),n)})))()},closeMe:function(e){this.$refs.popup.close()}})});t.default=s}).call(this,n("a9ff")["default"])},e92d:function(e,t,n){"use strict";n.r(t);var i=n("df1e"),o=n.n(i);for(var a in i)["default"].indexOf(a)<0&&function(e){n.d(t,e,(function(){return i[e]}))}(a);t["default"]=o.a},ee7c:function(e,t,n){"use strict";n.r(t);var i=n("9205"),o=n("b504");for(var a in o)["default"].indexOf(a)<0&&function(e){n.d(t,e,(function(){return o[e]}))}(a);n("aa0e");var u=n("f0c5"),c=Object(u["a"])(o["default"],i["b"],i["c"],!1,null,"99b3946c",null,!1,i["a"],void 0);t["default"]=c.exports}}]);